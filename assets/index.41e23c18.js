import{d as e,c as a,a as s,w as t,b as n,p as r,e as o,f as l,o as i,t as c,g as d,F as p,r as f,h as u,P as v,i as g,j as m,k as h,l as D,m as b}from"./vendor.ee6a33fc.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(s){const t=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((s,r)=>{const o=new URL(e,t);if(self[a].moduleMap[o])return s(self[a].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${a}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){r(new Error(`Failed to import: ${e}`)),n(i)},onload(){s(self[a].moduleMap[o]),n(i)}});document.head.appendChild(i)})),self[a].moduleMap={}}}("/pdf-page-stripper/assets/");var w=e({data:()=>({isDragover:!1}),methods:{onChange(){const e=this.$refs.file.files;this.$emit("filesSelected",e)},dragenter(e){this.isDragover=!0},dragleave(e){this.isDragover=!1},drop(e){e.preventDefault(),this.isDragover=!1,this.$refs.file.files=e.dataTransfer.files,this.onChange()}}});const _=n("data-v-b032578c");r("data-v-b032578c");const y={class:"label"},z=o(" Drag'n drop or "),F=s("strong",{class:"selectSpan"},"select",-1),P=o(" PDF-files here ");l();const L=_(((e,n,r,o,l,c)=>(i(),a("div",{class:["dropzone",[e.isDragover?"dragover":""]],onDragover:[n[2]||(n[2]=(...a)=>e.dragenter&&e.dragenter(...a)),n[4]||(n[4]=t((()=>{}),["prevent"]))],onDragleave:n[3]||(n[3]=(...a)=>e.dragleave&&e.dragleave(...a)),onDrop:n[5]||(n[5]=(...a)=>e.drop&&e.drop(...a))},[s("label",y,[z,F,P,s("input",{type:"file",name:"file",class:"fileinput",accept:"application/pdf,.pdf",multiple:"",onChange:n[1]||(n[1]=a=>e.onChange()),ref:"file"},null,544)])],34))));w.render=L,w.__scopeId="data-v-b032578c";var S=e({props:["pdfFiles","zip"]});const R=n("data-v-2e6a72a4");r("data-v-2e6a72a4");const U=s("div",{class:"face-primary"},"Download as .zip",-1),k={class:"face-secondary"},$={key:1,class:"face-button"},j=s("div",{class:"face-primary"},"Loading .zip",-1),C=s("div",{class:"face-secondary"},"Loading...",-1),A={style:{"max-height":"calc(50vh - 123px)",overflow:"auto"}},M={class:"card__details"};l();const O=R(((e,t,n,r,l,u)=>(i(),a("div",null,[1==e.zip.state?(i(),a("a",{key:0,download:"stripped-pdfs.zip",class:"face-button",href:e.zip.result},[U,s("div",k," Size: "+c(Math.round(e.zip.size/1e4)/100)+" mb ",1)],8,["href"])):0==e.zip.state?(i(),a("a",$,[j,C])):d("",!0),s("div",A,[s("div",M,[s("ul",null,[(i(!0),a(p,null,f(e.pdfFiles,(e=>(i(),a("li",{key:e.id},[o(c(e.name)+" ",1),e.result?(i(),a("a",{key:0,download:e.name,href:e.result}," Download ",8,["download","href"])):d("",!0)])))),128))])])]),s("a",{class:"resetbtn",onClick:t[1]||(t[1]=a=>e.$emit("reset"))}," Strip again ")]))));S.render=O,S.__scopeId="data-v-2e6a72a4";var B=e({setup(){const e={stripPdf:async function(e){const a=await v.load(e),s=a.catalog.get(g.of("PageLabels"));if(!s)return;const t=s.get(g.of("Nums")).asArray();if(!t)return;const n=new Set;for(let o=1;o<t.length;o++){const e=t[o];e instanceof m&&n.add(e.asNumber()-1)}let r=!1;for(let o=a.getPageCount()-2;o>=0;o--)n.has(o)||(a.removePage(o),r=!0);return r?a:void 0},zipFiles:async function(e){const a=new h;for(let t=0;t<e.length;t++){if(void 0===e[t].result)continue;const s=await fetch(e[t].result).then((e=>e.blob()));a.file(e[t].name,s)}const s=await a.generateAsync({type:"blob",compression:"DEFLATE"});return{url:window.URL.createObjectURL(s),size:s.size}}},a=u([]),s=u({state:-1}),t=u(0);return{onFilesSelected:async function(n){if(t.value=.1,a.value.length=0,s.value.state=-1,0!=n.length){for(let r=0;r<n.length;r++){const o=n.item(r);if(!o)continue;a.value.push({id:""+r,name:`stripped-${o.name}`});const l=await o.arrayBuffer();t.value=(r+.3)/n.length*100;const i=await e.stripPdf(l);if(t.value=(r+.7)/n.length*100,i){const e=new Blob([await i.save()],{type:"application/pdf"});a.value[r].result=window.URL.createObjectURL(e),s.value.state=0}else a.value[r].name+=" - found nothing to strip";t.value=(r+1)/n.length*100}if(t.value=100,0===s.value.state){const t=await e.zipFiles(a.value);s.value.result=t.url,s.value.size=t.size,s.value.state=1}}},pdfFiles:a,zipping:s,processDone:t}},components:{DragnDrop:w,DownloadArea:S}});const E=n("data-v-92adb296");r("data-v-92adb296");const x=s("h2",null,"PDF Stripper",-1),I={class:"artboard"},N={class:"card"};l();const T=E(((e,t)=>{const n=D("DownloadArea"),r=D("DragnDrop");return i(),a(p,null,[x,s("div",I,[s("div",N,[s("div",{class:[[100==e.processDone?"card__side--back_active":""],"card__side card__side--back"]},[s(n,{pdfFiles:e.pdfFiles,zip:e.zipping,onReset:t[1]||(t[1]=()=>e.processDone=0)},null,8,["pdfFiles","zip"])],2),s("div",{class:[[100==e.processDone?"card__side--front_active":"",e.processDone>0?"toProgressbar":""],"card__side card__side--front"]},[s("div",{class:["progress-done",[0==e.processDone?"hideProgressBar":""]],style:{width:e.processDone+"%"}},null,6),s(r,{class:[e.processDone>0?"hideDragnDrop":""],onFilesSelected:e.onFilesSelected},null,8,["class","onFilesSelected"])],2)])])],64)}));B.render=T,B.__scopeId="data-v-92adb296";const q=e({name:"App",components:{PdfPageStripper:B}});q.render=function(e,s,t,n,r,o){const l=D("PdfPageStripper");return i(),a(l)};b(q).mount("#app");
